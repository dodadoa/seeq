<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="links/style.css">
    <link rel="stylesheet" href="links/fonts.css">
    <script src="../node_modules/socket.io-client/dist/socket.io.js"></script>
    <!-- <script src="../node_modules/mark.js/dist/mark.min.js"></script>
    <script src="../node_modules/TextHighlighter/src/TextHighlighter.js"></script> -->
    <style>
      ::selection {
        background: var(--hl-color); 
      }

      #devtools { display: none; }
    </style>

    <meta charset="UTF-8">
    <title>Letter Sequencer</title>
  </head>
  <body>
    <webview id="devtools"></webview>
    <script>
        const Seeq = require('./scripts/Seeq.js')
        const Canvas = require('./scripts/canvas.js')
        const {dialog,app} = require('electron').remote;
        const baffle = require('baffle');

        const fs = require('fs');
        const axios = require('axios');
        var socket = io('http://localhost:3000');
        // const os 	= require('os-utils');
        // const OSC = require('osc-js')

        
        // const options = { send: { port: 8000 } }
        // const osc = new OSC({ plugin: new OSC.DatagramPlugin(options) })
        var seeq = new Seeq();
        var canvas = new Canvas
        window.canvas = canvas // global availability for e.g. udp

        seeq.start();
        canvas.install(seeq.content.el)

        window.addEventListener('load', () => { 
          canvas.start(); 
        })
       
        // os.cpuUsage(function(v){
        //   let cpu = setInterval(() => {
        //     seeq.seq.setCPUUsageDisplay(v)
        //   }, 1000);
        // });

        // prevent dblclick selection.
        document.addEventListener('mousedown', function (event) {
          if (event.detail > 1) {
            event.preventDefault();
          }
        }, false);

        // frameless devtool.
        // const browserView = document.body
        // var browser
        //   var devtoolsView = document.getElementById('devtools')
        //   browserView.addEventListener('DOMContentLoaded', () => {
        //     browser = browserView.getWebContents()
        //     browser.setDevToolsWebContents(devtoolsView.getWebContents())
        //     browser.openDevTools()
        //   }) 
    </script>
  </body>
</html>
